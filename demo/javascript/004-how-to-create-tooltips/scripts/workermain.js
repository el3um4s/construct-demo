'use strict';{var ReportProjectScriptError=function(a,c,d){for(const [e,f]of a)if(!c[e])try{importScripts(f)}catch(b){a="scriptsInEvents.js"===e?"Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.":`Failed to load project script '${e}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+a,b);d.postMessage({type:"alert",message:a});break}},InitRuntime=async function(a){if(g)throw Error("already initialised");g=!0;const c=a.baseUrl;
self.devicePixelRatio=a.devicePixelRatio;var d=a.workerDependencyScripts.map(a=>{let b=a;return b=a instanceof Blob?URL.createObjectURL(a):(new URL(b,c)).toString()});const e=[];self.runOnStartup=function(a){if("function"!==typeof a)throw Error("runOnStartup called without a function");e.push(a)};var f=a.engineScripts.map(a=>(new URL(a,c)).toString());try{importScripts(...[...d,...f])}catch(b){console.error("[C3 runtime] Failed to load all engine scripts in worker: ",b);return}if((d=a.projectScripts)&&
0<d.length){f=a.projectScriptsStatus;self.C3_ProjectScriptsStatus=f;try{importScripts(...d.map(a=>a[1]))}catch(b){console.error("[Preview] Error loading project scripts: ",b);ReportProjectScriptError(d,f,a.messagePort);return}}a.runOnStartupFunctions=e;"preview"===a.exportType&&"object"!==typeof self.C3.ScriptsInEvents?(console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),a.messagePort.postMessage({type:"alert",message:"Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."})):
(h=self.C3_CreateRuntime(a),await self.C3_InitRuntime(h,a))};let g=!1,h=null;self.addEventListener("message",a=>{a=a.data;const c=a.type;if("init-runtime"===c)InitRuntime(a);else throw Error(`unknown message '${c}'`);})};
